<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Èü©ËØ≠ÂÆåÊï¥ÊñáÂ≠óÊµãÈ™å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        header {
            background: #2c3e50;
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
        }
        
        .quiz-area {
            padding: 30px;
        }
        
        .question-container {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .korean-char {
            font-size: 6rem;
            margin: 20px 0;
            color: #2c3e50;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .option {
            padding: 18px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .option:hover {
            background: #e9ecef;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .option.correct {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        
        .option.incorrect {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        .feedback {
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            margin: 20px 0;
            min-height: 30px;
        }
        
        .correct-feedback {
            color: #28a745;
        }
        
        .incorrect-feedback {
            color: #dc3545;
        }
        
        .next-btn {
            display: block;
            width: 200px;
            margin: 0 auto;
            padding: 14px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .next-btn:hover {
            background: #2980b9;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            padding: 15px;
            border-top: 1px solid #dee2e6;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .explanation {
            background: #e9f7fe;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        @media (max-width: 600px) {
            .korean-char {
                font-size: 4rem;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üá∞üá∑ Èü©ËØ≠ÂÆåÊï¥ÊñáÂ≠óÊµãÈ™å</h1>
            <div class="subtitle">ÈÄâÊã©Ê≠£Á°ÆÁöÑÁΩóÈ©¨Èü≥ËØªÈü≥</div>
        </header>
        
        <div class="quiz-area">
            <div class="question-container">
                <div class="korean-char" id="koreanChar">Ìïú</div>
            </div>
            
            <div class="options-container" id="optionsContainer">
                <!-- ÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
            </div>
            
            <div class="feedback" id="feedback"></div>
            
            <button class="next-btn" id="nextBtn">‰∏ã‰∏ÄÈ¢ò</button>
            
            <div class="explanation" id="explanation">
                ÊèêÁ§∫ÔºöÂπ≤Êâ∞È°π‰∏éÊ≠£Á°ÆÁ≠îÊ°àÂú®ÂÖÉÈü≥„ÄÅËæÖÈü≥ÊàñÊî∂Èü≥ÊñπÈù¢Áõ∏‰ºº
            </div>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">ÂæóÂàÜ</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="correctCount">0</div>
                <div class="stat-label">Ê≠£Á°Æ</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="wrongCount">0</div>
                <div class="stat-label">ÈîôËØØ</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="questionCount">0</div>
                <div class="stat-label">È¢òÁõÆ</div>
            </div>
        </div>
    </div>

    <script>
        // Èü©ËØ≠ÂèëÈü≥Êï∞ÊçÆ
        const koreanSounds = {
            // ÂàùÂ£∞ÔºàËæÖÈü≥Ôºâ
            initials: {
                '·ÑÄ': { roman: 'g', type: 'initial' },
                '·ÑÅ': { roman: 'kk', type: 'initial' },
                '·ÑÇ': { roman: 'n', type: 'initial' },
                '·ÑÉ': { roman: 'd', type: 'initial' },
                '·ÑÑ': { roman: 'tt', type: 'initial' },
                '·ÑÖ': { roman: 'r', type: 'initial' },
                '·ÑÜ': { roman: 'm', type: 'initial' },
                '·Ñá': { roman: 'b', type: 'initial' },
                '·Ñà': { roman: 'pp', type: 'initial' },
                '·Ñâ': { roman: 's', type: 'initial' },
                '·Ñä': { roman: 'ss', type: 'initial' },
                '·Ñã': { roman: '', type: 'initial' },
                '·Ñå': { roman: 'j', type: 'initial' },
                '·Ñç': { roman: 'jj', type: 'initial' },
                '·Ñé': { roman: 'ch', type: 'initial' },
                '·Ñè': { roman: 'k', type: 'initial' },
                '·Ñê': { roman: 't', type: 'initial' },
                '·Ñë': { roman: 'p', type: 'initial' },
                '·Ñí': { roman: 'h', type: 'initial' }
            },
            // ‰∏≠Â£∞ÔºàÂÖÉÈü≥Ôºâ
            medials: {
                '·Ö°': { roman: 'a', type: 'medial' },
                '·Ö¢': { roman: 'ae', type: 'medial' },
                '·Ö£': { roman: 'ya', type: 'medial' },
                '·Ö§': { roman: 'yae', type: 'medial' },
                '·Ö•': { roman: 'eo', type: 'medial' },
                '·Ö¶': { roman: 'e', type: 'medial' },
                '·Öß': { roman: 'yeo', type: 'medial' },
                '·Ö®': { roman: 'ye', type: 'medial' },
                '·Ö©': { roman: 'o', type: 'medial' },
                '·Ö™': { roman: 'wa', type: 'medial' },
                '·Ö´': { roman: 'wae', type: 'medial' },
                '·Ö¨': { roman: 'oe', type: 'medial' },
                '·Ö≠': { roman: 'yo', type: 'medial' },
                '·ÖÆ': { roman: 'u', type: 'medial' },
                '·ÖØ': { roman: 'wo', type: 'medial' },
                '·Ö∞': { roman: 'we', type: 'medial' },
                '·Ö±': { roman: 'wi', type: 'medial' },
                '·Ö≤': { roman: 'yu', type: 'medial' },
                '·Ö≥': { roman: 'eu', type: 'medial' },
                '·Ö¥': { roman: 'ui', type: 'medial' },
                '·Öµ': { roman: 'i', type: 'medial' }
            },
            // ÁªàÂ£∞ÔºàÊî∂Èü≥Ôºâ
            finals: {
                '': { roman: '', type: 'final' },
                '·Ü®': { roman: 'k', type: 'final' },
                '·Ü©': { roman: 'k', type: 'final' },
                '·Ü™': { roman: 'k', type: 'final' },
                '·Ü´': { roman: 'n', type: 'final' },
                '·Ü¨': { roman: 'n', type: 'final' },
                '·Ü≠': { roman: 'n', type: 'final' },
                '·ÜÆ': { roman: 't', type: 'final' },
                '·ÜØ': { roman: 'l', type: 'final' },
                '·Ü∞': { roman: 'k', type: 'final' },
                '·Ü±': { roman: 'm', type: 'final' },
                '·Ü≤': { roman: 'p', type: 'final' },
                '·Ü≥': { roman: 'l', type: 'final' },
                '·Ü¥': { roman: 'l', type: 'final' },
                '·Üµ': { roman: 'p', type: 'final' },
                '·Ü∂': { roman: 'l', type: 'final' },
                '·Ü∑': { roman: 'm', type: 'final' },
                '·Ü∏': { roman: 'p', type: 'final' },
                '·Üπ': { roman: 'p', type: 'final' },
                '·Ü∫': { roman: 't', type: 'final' },
                '·Üª': { roman: 't', type: 'final' },
                '·Üº': { roman: 'ng', type: 'final' },
                '·ÜΩ': { roman: 't', type: 'final' },
                '·Üæ': { roman: 't', type: 'final' },
                '·Üø': { roman: 'k', type: 'final' },
                '·áÄ': { roman: 't', type: 'final' },
                '·áÅ': { roman: 'p', type: 'final' },
                '·áÇ': { roman: 't', type: 'final' }
            }
        };

        // Â∏∏Áî®Èü©ËØ≠ÂçïÂ≠óÂàóË°®ÔºàUnicodeÁºñÁ†ÅÔºâ
        const commonKoreanChars = [
            'Í∞Ä', 'ÎÇò', 'Îã§', 'Îùº', 'Îßà', 'Î∞î', 'ÏÇ¨', 'ÏïÑ', 'Ïûê', 'Ï∞®', 'Ïπ¥', 'ÌÉÄ', 'Ìåå', 'Ìïò',
            'Í∞Å', 'Í∞Ñ', 'Í∞à', 'Í∞ê', 'Í∞ï', 'Í∞ú', 'Í±∞', 'Í±¥', 'Í±∏', 'Í≤Ä', 'Í≤Ω', 'Í≥†', 'Í≥°', 'Í≥µ', 'Í≥º', 'Í¥Ä', 'Í¥ë', 'Íµê', 'Íµ¨', 'Íµ≠', 'Íµ∞', 'Í∂å', 'Í∑Ä', 'Í∑ú', 'Í∑∏', 'Í∑º', 'Í∏Ä', 'Í∏à', 'Í∏∞', 'Í∏∏', 'ÍπÄ',
            'ÎÇò', 'ÎÇô', 'ÎÇ®', 'ÎÇ©', 'ÎÇ≠', 'ÎÇ¥', 'ÎÑà', 'ÎÑ§', 'ÎÖÄ', 'ÎÖÑ', 'ÎÖº', 'ÎÜÄ', 'ÎÜç', 'Îáå', 'ÎàÑ', 'Îàà', 'Îâ¥', 'Îäê', 'Îäë', 'Îäî', 'Îäò', 'Îä•', 'Îãà', 'Îãâ', 'Îãê', 'Îã§', 'Îã®', 'Îã¨', 'Îã¥', 'Îãπ', 'ÎåÄ', 'Îçî', 'Îçò', 'Îçï', 'ÎèÑ', 'ÎèÖ', 'Îèà', 'Îèô', 'Îëê', 'Îëò', 'Îì±', 'Îîî', 'Îî∞', 'Îïå', 'Îòê',
            'Îùº', 'ÎùΩ', 'ÎûÄ', 'Îûå', 'Îûë', 'Îûò', 'Îü¨', 'Îü∞', 'ÎüΩ', 'Î†à', 'Î°ú', 'Î°ù', 'Î°†', 'Î°±', 'Î£®', 'Î•ò', 'Î•¥', 'Î•∏', 'Î¶Ñ', 'Î¶¨', 'Î¶∞', 'Î¶º', 'Îßà', 'Îßâ', 'Îßå', 'Îßê', 'Îßù', 'Îß§', 'Î®∏', 'Î®º', 'Î©Ä', 'Î©î', 'Î™®', 'Î™©', 'Î™∞', 'Î™∏', 'Î¨¥', 'Î¨∏', 'Î¨º', 'ÎØ∏', 'ÎØº', 'Î∞î', 'Î∞ï', 'Î∞ò', 'Î∞ú', 'Î∞©', 'Î∞∞', 'Î≤Ñ', 'Î≤à', 'Î≤î', 'Î≤†', 'Î≥¥', 'Î≥µ', 'Î≥∏', 'Î¥â', 'Î∂Ä', 'Î∂Ñ', 'Î∂à', 'ÎπÑ', 'Îπà', 'Îπõ',
            'ÏÇ¨', 'ÏÇ≠', 'ÏÇ∞', 'ÏÇ¥', 'ÏÇº', 'ÏÉÅ', 'ÏÉà', 'ÏÑú', 'ÏÑ†', 'ÏÑ§', 'ÏÑ¨', 'ÏÑ±', 'ÏÑ∏', 'ÏÜå', 'ÏÜç', 'ÏÜê', 'ÏÜ°', 'Ïàò', 'Ïàú', 'Ïà†', 'Ïäµ', 'Ïäπ', 'Ïãú', 'Ïãù', 'Ïã†', 'Ïã§', 'Ïã¨', 'ÏïÑ', 'ÏïÖ', 'Ïïà', 'Ïïå', 'Ïïî', 'Ïïô', 'Ïï†', 'Ïïº', 'ÏïΩ', 'Ïñë', 'Ïñ¥', 'Ïñµ', 'Ïñ∏', 'Ïñº', 'ÏóÑ', 'Ïóê', 'Ïó¨', 'Ïó≠', 'Ïó∞', 'Ïó¥', 'Ïóº', 'ÏòÅ', 'Ïòà', 'Ïò§', 'Ïò•', 'Ïò®', 'Ïò¨', 'Ïò¥', 'Ïö©', 'Ïö∞', 'Ïö¥', 'Ïö∏', 'ÏõÄ', 'Ïõê', 'Ïõî', 'ÏúÑ', 'Ïú†', 'Ïú°', 'ÏùÄ', 'ÏùÑ', 'Ïùå', 'Ïùë', 'Ïùò', 'Ïù¥', 'Ïù∏', 'Ïùº', 'ÏûÑ', 'Ïûê', 'Ïûë', 'Ïûî', 'Ïû°', 'Ïû•', 'Ïû¨', 'Ï†Ä', 'Ï†Ñ', 'Ï†à', 'Ï†ê', 'Ï†ï', 'Ï†ú', 'Ï°∞', 'Ï°±', 'Ï°¥', 'Ï¢Ö', 'Ï¢å', 'Ï£º', 'Ï§Ä', 'Ï§ë', 'ÏßÄ', 'ÏßÑ', 'Ïßà', 'Ïßë', 'Ï∞®', 'Ï∞∏', 'Ï∞Ω', 'Ï±Ñ', 'Ï≤ò', 'Ï≤ú', 'Ï≤†', 'Ï≤≠', 'Ï≤¥', 'Ï¥à', 'Ï¥â', 'Ï¥å', 'Ïµú', 'Ï∂î', 'Ï∂ï', 'Ï∂ò', 'Ï∂ú', 'Ï∂©', 'Ïπò', 'Ïπú', 'Ïπ†', 'Ïπ¥', 'Ïπ∏', 'Ïπº', 'Ï∫Ñ', 'Ï∫ê', 'Ïª¥', 'ÏΩî', 'ÏΩò', 'Ïø†', 'ÌÄ¥', 'ÌÅ¨', 'ÌÇ§', 'ÌÉÄ', 'ÌÉÅ', 'ÌÉÑ', 'ÌÉà', 'ÌÉê', 'ÌÉú', 'ÌÑ∞', 'ÌÜ†', 'ÌÜ§', 'ÌÜµ', 'Ìà¨', 'Ìä∏', 'Ìäπ', 'Ìåå', 'Ìåê', 'Ìåî', 'Ìå®', 'Ìçº', 'Ìéò', 'Ìè¨', 'Ìè≠', 'Ìëú', 'Ìë∏', 'ÌíÄ', 'ÌîÑ', 'Ìîº', 'Ìïò', 'Ìïô', 'Ìïú', 'Ìï†', 'Ìï®', 'Ìï≠', 'Ìï¥', 'Ìóà', 'ÌòÑ', 'Ìòà', 'ÌòÅ', 'ÌòÑ', 'Ìòï', 'Ìò∏', 'Ìòπ', 'Ìòº', 'ÌôÄ', 'Ìôî', 'Ìôï', 'Ìôò', 'Ìôú', 'Ìô©', 'Ìöå', 'Ìö®', 'ÌõÑ', 'Ìõà', 'Ìù•', 'Ìûà'
        ];

        // Ê∏∏ÊàèÁä∂ÊÄÅ
        let gameState = {
            currentChar: '',
            correctRoman: '',
            options: [],
            score: 0,
            correctCount: 0,
            wrongCount: 0,
            questionCount: 0,
            answered: false
        };

        // DOMÂÖÉÁ¥†
        const koreanCharEl = document.getElementById('koreanChar');
        const optionsContainerEl = document.getElementById('optionsContainer');
        const feedbackEl = document.getElementById('feedback');
        const nextBtn = document.getElementById('nextBtn');
        const explanationEl = document.getElementById('explanation');
        const scoreEl = document.getElementById('score');
        const correctCountEl = document.getElementById('correctCount');
        const wrongCountEl = document.getElementById('wrongCount');
        const questionCountEl = document.getElementById('questionCount');

        // ÁîüÊàêÈöèÊú∫Èü©ËØ≠ÊñáÂ≠ó
        function getRandomKoreanChar() {
            return commonKoreanChars[Math.floor(Math.random() * commonKoreanChars.length)];
        }

        // ÂàÜËß£Èü©ËØ≠ÊñáÂ≠ó‰∏∫ÂàùÂ£∞„ÄÅ‰∏≠Â£∞„ÄÅÁªàÂ£∞
        function decomposeHangul(char) {
            const code = char.charCodeAt(0) - 0xAC00;
            const finalIndex = code % 28;
            const medialIndex = ((code - finalIndex) / 28) % 21;
            const initialIndex = parseInt((code - finalIndex) / 28 / 21);
            
            const initial = String.fromCharCode(0x1100 + initialIndex);
            const medial = String.fromCharCode(0x1161 + medialIndex);
            const final = finalIndex > 0 ? String.fromCharCode(0x11A7 + finalIndex) : '';
            
            return { initial, medial, final };
        }

        // Ëé∑ÂèñÈü©ËØ≠ÊñáÂ≠óÁöÑÁΩóÈ©¨Èü≥
        function getRomanization(char) {
            const { initial, medial, final } = decomposeHangul(char);
            
            const initialRoman = koreanSounds.initials[initial]?.roman || '';
            const medialRoman = koreanSounds.medials[medial]?.roman || '';
            const finalRoman = koreanSounds.finals[final]?.roman || '';
            
            return initialRoman + medialRoman + finalRoman;
        }

        // ÁîüÊàêÂπ≤Êâ∞È°π
        function generateDistractors(correctRoman, char) {
            const { initial, medial, final } = decomposeHangul(char);
            
            const distractors = [];
            const allRomans = new Set();
            
            // Êî∂ÈõÜÊâÄÊúâÂèØËÉΩÁöÑÁΩóÈ©¨Èü≥
            for (const char of commonKoreanChars) {
                allRomans.add(getRomanization(char));
            }
            
            const romanArray = Array.from(allRomans);
            
            // ÁîüÊàê‰∏éÊ≠£Á°ÆÁ≠îÊ°àÁõ∏‰ººÁöÑÂπ≤Êâ∞È°π
            // 1. Áõ∏ÂêåÂàùÂ£∞ÔºàËæÖÈü≥Ôºâ
            const sameInitialChars = commonKoreanChars.filter(c => {
                const decomp = decomposeHangul(c);
                return decomp.initial === initial && c !== char;
            });
            
            if (sameInitialChars.length > 0) {
                const randomChar = sameInitialChars[Math.floor(Math.random() * sameInitialChars.length)];
                distractors.push(getRomanization(randomChar));
            }
            
            // 2. Áõ∏Âêå‰∏≠Â£∞ÔºàÂÖÉÈü≥Ôºâ
            const sameMedialChars = commonKoreanChars.filter(c => {
                const decomp = decomposeHangul(c);
                return decomp.medial === medial && c !== char;
            });
            
            if (sameMedialChars.length > 0) {
                const randomChar = sameMedialChars[Math.floor(Math.random() * sameMedialChars.length)];
                distractors.push(getRomanization(randomChar));
            }
            
            // 3. Áõ∏ÂêåÁªàÂ£∞ÔºàÊî∂Èü≥Ôºâ
            const sameFinalChars = commonKoreanChars.filter(c => {
                const decomp = decomposeHangul(c);
                return decomp.final === final && c !== char;
            });
            
            if (sameFinalChars.length > 0) {
                const randomChar = sameFinalChars[Math.floor(Math.random() * sameFinalChars.length)];
                distractors.push(getRomanization(randomChar));
            }
            
            // Â¶ÇÊûúÁõ∏‰ººÂπ≤Êâ∞È°π‰∏çË∂≥Ôºå‰ªéÊâÄÊúâÁΩóÈ©¨Èü≥‰∏≠ÈöèÊú∫ÈÄâÊã©
            while (distractors.length < 2) {
                const randomRoman = romanArray[Math.floor(Math.random() * romanArray.length)];
                if (randomRoman !== correctRoman && !distractors.includes(randomRoman)) {
                    distractors.push(randomRoman);
                }
            }
            
            // ÈöèÊú∫ÈÄâÊã©‰∏§‰∏™Âπ≤Êâ∞È°π
            return distractors.slice(0, 2);
        }

        // ÁîüÊàêÊñ∞È¢òÁõÆ
        function generateQuestion() {
            gameState.answered = false;
            gameState.questionCount++;
            
            // Ëé∑ÂèñÈöèÊú∫Èü©ËØ≠ÊñáÂ≠ó
            gameState.currentChar = getRandomKoreanChar();
            koreanCharEl.textContent = gameState.currentChar;
            
            // Ëé∑ÂèñÊ≠£Á°ÆÁΩóÈ©¨Èü≥
            gameState.correctRoman = getRomanization(gameState.currentChar);
            
            // ÁîüÊàêÂπ≤Êâ∞È°π
            const distractors = generateDistractors(gameState.correctRoman, gameState.currentChar);
            
            // ÁªÑÂêàÈÄâÈ°π
            gameState.options = [gameState.correctRoman, ...distractors];
            
            // ÈöèÊú∫ÊéíÂ∫èÈÄâÈ°π
            for (let i = gameState.options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [gameState.options[i], gameState.options[j]] = [gameState.options[j], gameState.options[i]];
            }
            
            // Êõ¥Êñ∞ÈÄâÈ°πÊåâÈíÆ
            updateOptions();
            
            // ÈáçÁΩÆÂèçÈ¶à
            feedbackEl.textContent = '';
            feedbackEl.className = 'feedback';
            explanationEl.textContent = 'ÊèêÁ§∫ÔºöÂπ≤Êâ∞È°π‰∏éÊ≠£Á°ÆÁ≠îÊ°àÂú®ÂÖÉÈü≥„ÄÅËæÖÈü≥ÊàñÊî∂Èü≥ÊñπÈù¢Áõ∏‰ºº';
            
            // Á¶ÅÁî®‰∏ã‰∏ÄÈ¢òÊåâÈíÆ
            nextBtn.style.display = 'none';
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
            updateStats();
        }

        // Êõ¥Êñ∞ÈÄâÈ°πÊåâÈíÆ
        function updateOptions() {
            optionsContainerEl.innerHTML = '';
            
            gameState.options.forEach((option, index) => {
                const button = document.createElement('div');
                button.className = 'option';
                button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                button.onclick = () => checkAnswer(option);
                optionsContainerEl.appendChild(button);
            });
        }

        // Ê£ÄÊü•Á≠îÊ°à
        function checkAnswer(selectedAnswer) {
            if (gameState.answered) return;
            
            gameState.answered = true;
            const buttons = document.querySelectorAll('.option');
            let isCorrect = false;
            
            buttons.forEach(button => {
                const buttonAnswer = button.textContent.split('. ')[1];
                
                if (buttonAnswer === gameState.correctRoman) {
                    button.classList.add('correct');
                }
                
                if (buttonAnswer === selectedAnswer) {
                    if (selectedAnswer === gameState.correctRoman) {
                        button.classList.add('correct');
                        isCorrect = true;
                    } else {
                        button.classList.add('incorrect');
                    }
                }
            });
            
            if (isCorrect) {
                feedbackEl.textContent = '‚úì Ê≠£Á°ÆÔºÅ';
                feedbackEl.className = 'feedback correct-feedback';
                gameState.score += 10;
                gameState.correctCount++;
                
                // ÊòæÁ§∫ÂàÜËß£ËØ¥Êòé
                const { initial, medial, final } = decomposeHangul(gameState.currentChar);
                const initialRoman = koreanSounds.initials[initial]?.roman || '';
                const medialRoman = koreanSounds.medials[medial]?.roman || '';
                const finalRoman = koreanSounds.finals[final]?.roman || '';
                
                explanationEl.innerHTML = `
                    <strong>ÂàÜËß£ËØ¥ÊòéÔºö</strong><br>
                    ÂàùÂ£∞: ${initial} ‚Üí ${initialRoman || '(Êó†Â£∞)'}<br>
                    ‰∏≠Â£∞: ${medial} ‚Üí ${medialRoman}<br>
                    ${final ? `ÁªàÂ£∞: ${final} ‚Üí ${finalRoman}` : 'ÁªàÂ£∞: Êó†Êî∂Èü≥'}
                `;
            } else {
                feedbackEl.textContent = '‚úó ÈîôËØØÔºÅ';
                feedbackEl.className = 'feedback incorrect-feedback';
                gameState.wrongCount++;
                
                explanationEl.innerHTML = `
                    <strong>Ê≠£Á°ÆÁ≠îÊ°àÔºö${gameState.correctRoman}</strong><br>
                    ËØ∑ËÆ∞‰ΩèËøô‰∏™ËØªÈü≥ÔºåÁªßÁª≠Âä™ÂäõÔºÅ
                `;
            }
            
            // ÊòæÁ§∫‰∏ã‰∏ÄÈ¢òÊåâÈíÆ
            nextBtn.style.display = 'block';
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
            updateStats();
        }

        // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
        function updateStats() {
            scoreEl.textContent = gameState.score;
            correctCountEl.textContent = gameState.correctCount;
            wrongCountEl.textContent = gameState.wrongCount;
            questionCountEl.textContent = gameState.questionCount;
        }

        // ÂàùÂßãÂåñÊ∏∏Êàè
        function initGame() {
            generateQuestion();
            nextBtn.onclick = generateQuestion;
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂºÄÂßãÊ∏∏Êàè
        window.onload = initGame;
    </script>
</body>
</html>

